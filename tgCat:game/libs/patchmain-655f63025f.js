!function(){let e,t=(e=Laya.SpineTempletBase.prototype).destroy;e.destroy=function(){let e;for(e in this._textureDic)"root"!=e&&e&&this._textureDic[e]._removeReference();t.call(this)},(e=Laya.SpineTemplet_3_x.prototype)._textureLoader=function(e){let t=e.url;var r=t.replace(this.clientId,"").replace(".ktx",".png");let a=this._textureDic[r]=new Laya.SpineGLTexture(e.bitmap);return a._addReference(),a},(e=spine.AssetManager.prototype).loadTexture=function(t,r=null,a=null){t=this.pathPrefix+t;this.toLoad++;let n=Laya.Laya||Laya,l=t;n.Loader.checkUseKtx(l)&&(l=t.replace(".png",".ktx")),n.loader.load([{type:n.Loader.IMAGE,url:l}],n.Handler.create(this,e=>{e?(e=this.textureLoader(n.loader.getRes(l)),this.assets[t]=e,this.toLoad--,this.loaded++,r&&r(t,e)):(this.errors[t]="Couldn't load image "+t,this.toLoad--,this.loaded++,a&&a(t,"Couldn't load image "+t))}))},(e=Laya.HTMLElement.prototype)._getWords=function(){if(!this._text)return null;var e=this._text.text;if(!e||0===e.length)return null;var r=this._text.words,a=this._parseWords(e);if(r&&r.length===a.length)return r;null===r&&(this._text.words=r=[]),r.length=a.length;var n=this.style,l=n.font;for(let e=0,t=a.length;e<t;e++){var o=a[e],s=Laya.Browser.measureText(o,l);r[e]=Laya.HTMLChar.create().setData(o,s.width,s.height||n.fontSize,n)}return r},e._parseWords=function(t){var r=[3584,3711];let a=[[3585,3630],3634],n=[3633,3635,3636,3637,3638,3639,3655,3660,3661,3662,3640,3641,3656,3657,3658,3659],l="";for(let e=0;e<t.length;e++){var o=e<t.length-1?",":"";l+=t.charCodeAt(e).toString(16)+o}let s=[];var i=l.split(",");let h=0,u="";var d=i.length;for(let e=0;e<i.length;e++){var p=parseInt(i[e],16),f=String.fromCharCode(p);r[0]<=p&&p<=r[1]?!function(t){for(let e=0;e<a.length;e++){var r=a[e];if(Array.isArray(r)){if(t>=r[0]&&t<=r[1])return!0}else if(t==r)return!0}return!1}(p)?-1!=n.indexOf(p)?(u&&(u+=f,3<=++h&&(s.push(u),u="",h=0)),e==d-1&&s.push(u)):(u&&(s.push(u),u="",h=0),s.push(f)):(u&&s.push(u),u=f,h=0,e==d-1&&s.push(u)):(u&&(s.push(u),u="",h=0),s.push(f))}return s}}();